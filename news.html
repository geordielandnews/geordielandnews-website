<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="google-adsense-account" content="ca-pub-6068321329701529">
  <meta name="viewport" content="width=1200, initial-scale=1.0, user-scalable=yes">
  <title>Geordie Land News - Home</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <style>
    /* ------------------------------
       SECTION BARS
    ------------------------------ */
    .section-bar1, .section-bar2, .section-bar3, .section-bar4 {
      width: 100%;
      height: 10px;
      background-color: #cccccc;
      margin: 0;
      padding: 0;
    }

    .section-bar2 {
      margin-bottom: 10px;
    }

    .section-bar3 {
      margin-top: 10px;
    }

    .section-bar5 {
      width: 100%;
      height: 10px;
      background-color: #cccccc;
      margin: 0;
      padding: 0;   
      margin-bottom: 0px;
      padding-bottom: 0px;
    }

    /* ------------------------------
       PAGE LAYOUT
    ------------------------------ */
    .content-below-bar1 {
      display: flex;
      flex-direction: column; /* stack items vertically */
      align-items: center;    /* center horizontally */
    }

    .page-layout {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      width: 2080px;
      margin: 0 auto;
    }

    .content-center {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin: 10px 10px 0 10px;
    }
</style>

  <!-- Header -->
  <header class="header">
    <img src="pictures/newcastle-logo.png" alt="Newcastle Logo" class="logo" />
    <h1 class="title">Geordie Land News</h1>
  </header>

  <!-- Navbar -->
  <nav class="navbar">
    <ul>
      <li><a href="home.html">HOME</a></li>
      <li><a href="news.html">NEWS</a></li>
      <li><a href="fixtures.html">FIXTURES</a></li>
      <li><a href="squad.html">SQUAD</a></li>
      <li><a href="transfers.html">TRANSFERS</a></li>
      <li><a href="stats.html">STATS</a></li>
      <li><a href="discussions.html">DISCUSSIONS</a></li>
    </ul>
  </nav>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6068321329701529"
     crossorigin="anonymous"></script>

<!-- Left ad panel -->
<div class="ad-panel-left">

  <div class="ad-slot-1-left">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4420623902"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="ad-slot-2-left">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4420623902"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="ad-slot-3-left">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4420623902"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="ad-slot-4-left">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4420623902"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

</div>

<!-- Right ad panel -->
<div class="ad-panel-right">

  <div class="ad-slot-1-right">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4894416560"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="ad-slot-2-right">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4894416560"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="ad-slot-3-right">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4894416560"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <div class="ad-slot-4-right">
    <ins class="adsbygoogle"
         style="display:inline-block;width:430px;height:25%"
         data-ad-client="ca-pub-6068321329701529"
         data-ad-slot="4894416560"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

</div>

<style>
#adblock-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.95);
  display: none; /* hidden by default */
  justify-content: center;
  align-items: center;
  text-align: center;
  z-index: 9999;
  color: #fff;
  overflow: hidden;
}

#adblock-overlay .box {
  background: #222;
  padding: 30px;
  border-radius: 8px;
  max-width: 500px;
  width: 90%;
  box-sizing: border-box;
}

#adblock-overlay button {
  margin-top: 15px;
  padding: 12px 24px;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
  background: #f44336;
  color: #fff;
}

/* Hidden bait element to detect ad blockers */
#ad-bait {
  width: 1px;
  height: 1px;
  position: absolute;
  left: -1000px;
  top: -1000px;
}
</style>

<!-- Bait element for ad blocker detection -->
<div id="ad-bait" class="ads adsbygoogle ad-banner ad-container"></div>

<!-- Overlay HTML -->
<div id="adblock-overlay">
  <div class="box">
    <h2>Ad Blocker Detected ðŸš«</h2>
    <p>We rely on advertising to keep this site free.<br>
       Please disable your ad blocker to continue.</p>
    <button id="refresh-btn">Iâ€™ve Disabled Adblock</button>
  </div>
</div>

<script>
window.addEventListener('load', () => {
  function checkAdblock() {
    const bait = document.getElementById('ad-bait');
    if (!bait) return true; // removed by ad blocker
    const style = getComputedStyle(bait);
    // blocked if hidden or removed
    return style.display === 'none' || style.visibility === 'hidden' || bait.offsetParent === null;
  }

  // Force overlay to show if ad blocker detected
  const overlay = document.getElementById('adblock-overlay');
  if (checkAdblock()) {
    overlay.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }

  // Button reloads the page
  document.getElementById('refresh-btn').addEventListener('click', () => {
    location.reload();
  });
});
</script>

  <div class="section-bar1"></div>

<style>
  .ad-footer {
    margin-top: 10px;
    margin-bottom: 10px;
    width: 100%;
    height: 150px;
    border: 2px dashed #999;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #666;
    font-size: 18px;
    text-align: center;
    background-color: #fff; 
    cursor: pointer;
    transition: border-color 0.3s;
  }
</style>

<div class="ad-footer">Advertise here! Contact for more info!</div>   

<div class="section-bar2"></div>

  <!-- Content below the section bar -->
  <div class="content-below-bar1">        

  <!-- News Section -->

<style>
  /* News Card Layout */
  .news-header { 
    background-color: #002147;
    color: #fff;
    font-weight: bold;
    padding: 10px 15px;
    font-size: 14px;
    text-align: left;
    text-transform: uppercase;
    border-top-left-radius: 0px;
    border-top-right-radius: 0px;
  }
  .news-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
    width: 1017px;
    margin: 0 auto;
  }
  .left-news-slot {
    display: flex;
    gap: 12px;
    padding: 12px;
    border: 1px solid #ccc;
    border-radius: 0;
    background-color: #fff;
    font-family: Arial, sans-serif;
  }
  .left-news-slot img {
    width: 300px;
    height: 200px;
    border-radius: 4px;
    display: block;
    object-fit: cover;
  }
  .left-news-content {
    display: flex;
    flex-direction: column;
    flex: 1;
  }
  .left-news-slot h3 {
    margin: 0 0 6px 0;
    font-size: 1.15rem;
    color: #222;
  }
  .left-news-slot .date {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 10px;
  }
  .left-news-slot p {
    font-size: 0.95rem;
    line-height: 1.3;
    color: #333;
    margin: 0 0 1em 0;
  }
  .left-news-slot h3 a {
    text-decoration: none;
    color: #222;
  }
  .left-news-slot h3 a:hover {
    text-decoration: underline;
    color: #0066cc;
  }

  /* Pagination */
  #pagination button {
    background: #00193f;
    color: #fff;
    border: none;
    padding: 8px 12px;
    margin: 0 3px;
    border-radius: 4px;
    cursor: pointer;
  }
  #pagination button:disabled {
    background: #1e90ff;
    cursor: default;
  }
</style>

<div class="news-container">
  <div class="news-header">LAST NEWS</div>
  <div id="newsContainer"></div>
</div>

<!-- Pagination -->
<div id="pagination" style="text-align:center; margin:20px 0;"></div>

<script>
const FEEDS = [
  'https://feeds.bbci.co.uk/sport/football/rss.xml',
  'https://www.skysports.com/rss/12040',
  'https://www.telegraph.co.uk/football/rss.xml',
  'https://www.chroniclelive.co.uk/all-about/newcastle-united-fc/?service=rss',
  'https://www.shieldsgazette.com/sport/football/newcastle-united/rss',
];

let allNews = [];
let currentPage = 1;
const perPage = 6;

// âœ… Load old news from localStorage
const saved = JSON.parse(localStorage.getItem("savedNews")) || [];

async function fetchNews() {
  const allItems = [];
  for (const feed of FEEDS) {
    try {
      const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feed)}`);
      const data = await response.json();
      if (data.status === 'ok') {
        allItems.push(...data.items);
      }
    } catch (e) {
      console.error('Error fetching', feed, e);
    }
  }

  // Filter Newcastle articles
  const filtered = allItems.filter(item =>
    item.title.toLowerCase().includes('newcastle') ||
    (item.description && item.description.toLowerCase().includes('newcastle'))
  );

  // Merge with saved ones, removing duplicates by link
  const combined = [...filtered, ...saved];
  const unique = Array.from(new Map(combined.map(item => [item.link, item])).values());

  // Sort newest first
  unique.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

  // Save updated list to localStorage
  localStorage.setItem("savedNews", JSON.stringify(unique.slice(0, 200))); // keep up to 200 recent

  allNews = unique;
  renderPage(1);
}

function renderPage(page) {
  currentPage = page;
  const container = document.getElementById('newsContainer');
  container.innerHTML = '';

  if (allNews.length === 0) {
    container.innerHTML = '<p>No Newcastle news available right now.</p>';
    return;
  }

  const start = (page - 1) * perPage;
  const end = start + perPage;
  const pageItems = allNews.slice(start, end);

  pageItems.forEach(item => {
    const pubDate = new Date(item.pubDate).toLocaleString();
    const div = document.createElement('div');
    div.className = 'left-news-slot';
    div.innerHTML = `
      <img src="${item.enclosure?.link || 'https://via.placeholder.com/300x200?text=News'}" alt="News Image" />
      <div class="left-news-content">
        <h3><a href="${item.link}" target="_blank">${item.title}</a></h3>
        <div class="date">${pubDate}</div>
        <p>${item.description || 'No summary available.'}</p>
      </div>
    `;
    container.appendChild(div);
  });

  renderPagination();
}

function renderPagination() {
  const totalPages = Math.ceil(allNews.length / perPage);
  const pagination = document.getElementById('pagination');
  pagination.innerHTML = '';

  if (totalPages <= 1) return;

  // Previous button
  if (currentPage > 1) {
    const prevBtn = document.createElement('button');
    prevBtn.textContent = 'Previous';
    prevBtn.onclick = () => renderPage(currentPage - 1);
    pagination.appendChild(prevBtn);
  }

  // Sliding window of 10 pages
  let startPage = currentPage;
  let endPage = startPage + 9; // show 10 pages max

  if (endPage > totalPages) {
    endPage = totalPages;
    startPage = Math.max(1, endPage - 9);
  }

  for (let i = startPage; i <= endPage; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;
    btn.disabled = i === currentPage;
    btn.onclick = () => renderPage(i);
    pagination.appendChild(btn);
  }

  // Next button
  if (currentPage < totalPages) {
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next';
    nextBtn.onclick = () => renderPage(currentPage + 1);
    pagination.appendChild(nextBtn);
  }

  // Back to Top button
  const topBtn = document.createElement('button');
  topBtn.textContent = 'â†‘ Top';
  topBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
  pagination.appendChild(topBtn);
}

fetchNews();
</script>

<!-- FOOTER -->

<style>
footer {
  width: 100%;
  height: 90px;
  background-color: #00193f;
  color: #fff;
  text-align: center;
  padding: 1rem;
  margin-top: 0px;
}
.social-icons a img {
   width: 24px;
  height: 24px;
  margin-left: 1rem;
  transition: filter 0.3s;
  filter: brightness(0) invert(1);
}
.social-icons a img:hover { 
  filter: brightness(0) saturate(100%) invert(38%) sepia(89%) saturate(5634%) hue-rotate(186deg) brightness(95%) contrast(100%);
}
</style>

<div class="section-bar3"></div>

<div class="ad-footer">Advertise here! Contact for more info!</div>

<div class="section-bar4"></div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Geordie Land News. All rights reserved.</p>
    <div class="social-icons">
      <a href="https://www.instagram.com/geordielandnews/" target="_blank"><img src="pictures/Instagram.png" alt="Instagram Logo"></a>
      <a href="https://x.com/GeordieLandNews" target="_blank"><img src="pictures/X.png" alt="X Logo"></a>
    </div>
  </footer>

  <script src="script.js"></script> 
</body>
</html>
